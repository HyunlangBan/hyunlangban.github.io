---
layout: post
tag: fullstack
title: psycopg2
---

## DBAPIs and psycopg2

### DBAPI
- 데이터베이스와 상호작용하고 그 결과를 특정 언어(ex. Ruby, Python, Javascript 등)를 이용하여 사용할 수 있다.
- 데이터베이스 어댑터라고 부르기도 한다.
- 모든 서버 프레임워크나 언어 + 데이터베이스 시스템에 따라 다른 DBAPI들이 존재한다.


### psycopg2
- Python에 사용되는 DBAPI이다.

### Python으로 psycopg2 사용해보기
```python
import psycopg2

## 데이터베이스와 연결
connection = psycopg2.connect('dbname=example', password = 'gus123')


## open session -- start transactions
## the cursor is offered by the connection object as a result of connectiong to psycopg2
cursor = connection.cursor()

## cursor is an interface that allows you to start queuing up work and transactions.
cursor.execute('''
CREATE TABLE table2 (
    id INTEGER PRIMARY KEY,
    completed BOOLEAN NOT NULL DEFAULT False
);
''')


cursor.execute('INSERT INTO table2 (id, completed) VALUES (1, true);')

## 만들었던 트랜젝션들을 커밋함
connection.commit()

## 더이상 트랜잭션을 만들지 않고 커밋하고 싶지 않다면
connection.close()
cursor.close()
```
