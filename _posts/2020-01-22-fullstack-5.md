---
layout: post
tag: fullstack
title: SQLAlchemy's Layers of Abstraction
---

## Layers of Abstraction

#### Without SQLAlchemy
psycopg2와 같은 DBAPI 라이브러리가 데이터베이스와 상호작용한다.
하지만 이것은 파이썬을 사용하여 데이터베이스와 상호작용하는 가장 편리한 방법이 아닐 수도 있다.

#### With SQLAlchemy
SQLAlchemy는 데이터와 상호작용할 수 있는 다양한 layers of abstraction을 제공하기 때문에 그중에서 선택하여 이용할 수 있다.

#### SQLAlchemy vs psycopg2
- SQLAlchemy **generates** SQL statements.
- psycopg2 directly **sends** SQL statements to the database.
- SQLAlchemy는 데이터베이스와 통신하기 위해서는 psycopg2나 다른 데이터베이스 드라이버들에 의존한다.

#### Layers of SQLAlchemy
1. DBAPI
2. The Dialect
3. The Connection Pool
4. The Engine
5. SQL Expressions
6. SQLAlchemy ORM(optional)

#### SQLAlchemy lets you traverse through all 3 layers of abstraction to interact with your database.
- ORM 레벨에 있을수도 있고
- Expression level에서 customized SQL code를 사용하여 데이터베이스에 접근할수도 있고
- Engine level에서 실행하기 위하여 raw SQL을 이용할 수도 있다.


---

### The Dialect

우리가 raw SQL 대신 SQLAlchemy를 이용하는 이유 중에 하나가 우리가 어떤 데이터베이스를 사용하고 있는지 알지 않아도 된다는 점이었는데 이를 가능하게 해주는 것이 바로 Dialect이다.
- The dialect's layer controls the quirks and flavor of the specific database system that we're using.

### The Connection Pool
