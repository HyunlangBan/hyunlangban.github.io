---
layout: post
title: fullstack
tag: git
---


## Full-Stack 1
[Udacity의 Full-Stack Web Developer](https://www.udacity.com/course/full-stack-web-developer-nanodegree--nd0044) 강의를 듣고 정리합니다.

<br><br>
### Interacting with Database
---

### Exeuction Plan
The DBMS takes a SQL query and generates an execution plan for the database engine to follow.<br>
- 쿼리문을 작성하면 그 쿼리문이 어떤 순서로 어떻게 실행되는지 execution plan이 존재한다. execution plan을 살펴봄으로써 쿼리의 성능에 대한 중요한 통찰력을 가질 수 있다.

#### Join을 실행할 때 Execution Plan
```
SELECT make, model FROM vehicles
JOIN drivers ON vehicels.driver_id = drivers.id;
```

위와 같은 쿼리문을 작성했다면 어떤 방식으로 실행 될까?
먼저 [Hash Join](https://www.depesz.com/2013/05/09/explaining-the-unexplainable-part-3/#hash-join)을 알아야한다.
위와 같이 join문을 실행하게 되면 Hash JOIN이 실행된다.

해시 조인이라는 것은 해시테이블을 하나 만들고 그 해시 테이블과 다른 테이블을 비교하여 조인을 하는 것이다.
좀 더 자세히 말하자면 우리는 drivers라는 테이블에서 id 칼럼을 이용하여 조인을 진행할 것이다.
그럼 id 칼럼을 기준으로 해시 테이블을 만든다. hash table의 key는 id가 되는 것이고 key에 맞는 데이터의 row를 저장해준다.

Perl notation을 참고하니 이해가 더 쉬웠다.
```
'123` => [ {data for row with ID = 123 }, ],
'256' => [ {data for row with ID = 256 }. ],
...
```

이렇게 만들어진 해시 테이블을 이용해서 아까 지정해두었던 다른 테이블(vehicles)과 조인할 수 있는지 확인한다.
vehicles 테이블의 id 칼럼의 각 value들이 hash에 존재하는지 확인한다.(vehicles의 한 열마다 해시 테이블은 매번 전체 탐색된다.)
만약 존재하면 hash에 해당하는 값이 조인되어 output rows를 만든다.

(근데 해시테이블을 만드는 테이블이 참고 사이트마다 다 달라서 이부분은 더 조사를 해봐야겠다.)

그냥 조건이 일치하면 테이블이 조인되는 줄 알았는데 어떤 절차로 이루어지는지 생각하진 못했었다. 한 페이지밖에 안되었지만 이해하는데 꽤 고생했다. 휴
